function start(){hayPausa=!1,timer=setInterval(function(){moverNave()},1e3*dt),document.getElementById("play").innerHTML="PAUSAR"}function stop(){hayPausa=!0,clearInterval(timer),motorOff(),1==finJuego?document.getElementById("play").innerHTML="JUGAR":document.getElementById("play").innerHTML="CONTINUAR"}function moverNave(){v+=a*dt,document.getElementById("velocidad").innerHTML=v.toFixed(2),v<velocidadImpacto?document.getElementById("velocidad").style.color="lime":v<1.5*velocidadImpacto?document.getElementById("velocidad").style.color="orangered":document.getElementById("velocidad").style.color="red",y+=v*dt,document.getElementById("altura").innerHTML=(puntoAterrizaje-y).toFixed(2),y+=v*dt,document.getElementById("altura").innerHTML=(puntoAterrizaje-y).toFixed(2),y<alturaInicio-30?(finJuego=!0,hayPausa=!0,mensajeSobreAltura(),motorOff(),stop()):y<puntoAterrizaje?document.getElementById("nave").style.top=y+"%":(document.getElementById("altura").innerHTML=0,hayPausa=!0,comprobarAterrizaje(),motorOff(),stop())}function motorOn(){fuel>0&&0==hayPausa&&0==finJuego&&(a=-g,null==timerFuel&&(timerFuel=setInterval(function(){actualizarFuel()},10)),document.getElementById("naveimg").src="img/"+naveImg+"p.png")}function motorOff(){0==finJuego&&(a=g,clearInterval(timerFuel),timerFuel=null,document.getElementById("naveimg").src="img/"+naveImg+".png")}function actualizarFuel(){1==hayFuel&&0==finJuego&&(fuel-=.1,fuel<=0&&(hayFuel=!1,fuel=0,motorOff()),fuel<=fuelInicial/5?document.getElementById("fuel").style.color="red":fuel<=fuelInicial/2&&(document.getElementById("fuel").style.color="orangered"),document.getElementById("fuel").innerHTML=fuel.toFixed(2))}function restart(){reiniciarConfiguracion(),hayPausa=!1,document.getElementById("divFinJuego").style.display="none"}function reiniciarConfiguracion(){y=alturaInicio,fuel=fuelInicial,v=0,hayFuel=!0,finJuego=!1,clearInterval(timer),timer=null,clearInterval(timerFuel),timerFuel=null,document.getElementById("fuel").style.color="lime",document.getElementById("fuel").innerHTML=fuel.toFixed(),document.getElementById("naveimg").src="img/"+naveImg+".png"}function comprobarAterrizaje(){finJuego=!0,v>velocidadImpacto?(document.getElementById("naveimg").src="img/explosion.png",mensajeFail()):(document.getElementById("naveimg").src="img/"+naveImg+".png",mensajeWin())}function mensajeBienvenida(){document.getElementById("divBienvenida").style.display="block"}function mensajeWin(){document.getElementById("divFinJuego").style.display="block",document.getElementById("cabezeraFin").innerHTML="VICTORIA",document.getElementById("parrafoFin").innerHTML="¡¡Enhorabuena!! Eres un atronauta genial."}function mensajeFail(){document.getElementById("divFinJuego").style.display="block",document.getElementById("cabezeraFin").innerHTML="HAS FALLADO",document.getElementById("parrafoFin").innerHTML="Otra vez será..."}function mensajeSobreAltura(){document.getElementById("divFinJuego").style.display="block",document.getElementById("cabezeraFin").innerHTML="HAS FALLADO",document.getElementById("parrafoFin").innerHTML="Recuerda que queremos ATERRIZAR... ¬¬"}function mostrarPausa(){stop(),ocultarTodo(),document.getElementById("divpausa").style.display="block",pausaVisible=!0}function mostrarInstrucciones(){stop(),ocultarTodo(),document.getElementById("divinstrucciones").style.display="block",instruccionesVisibles=!0}function mostrarOpciones(){stop(),ocultarTodo(),document.getElementById("divopciones").style.display="block",opcionesVisibles=!0}function mostrarAbout(){stop(),ocultarTodo(),document.getElementById("divabout").style.display="block",aboutVisible=!0}function ocultarTodo(){var b,a=document.getElementsByClassName("divEmergente");for(b=0;b<a.length;b++)a[b].style.display="none";pausaVisible=!1,instruccionesVisibles=!1,opcionesVisibles=!1,aboutVisible=!1}function ocultar(){ocultarTodo(),start(),motorOff()}function seleccionarFacil(){fuelInicial=100,velocidadImpacto=5,document.getElementById("facilNivel").style.textDecoration="underline",document.getElementById("medioNivel").style.textDecoration="none",document.getElementById("dificilNivel").style.textDecoration="none",document.getElementById("parrafoNivel").innerHTML="FÁCIL: Tienes 100 litros de combustible y debes aterrizar a menos de 5 m/s.",reiniciarConfiguracion()}function seleccionarMedio(){fuelInicial=75,velocidadImpacto=2.5,document.getElementById("facilNivel").style.textDecoration="none",document.getElementById("medioNivel").style.textDecoration="underline",document.getElementById("dificilNivel").style.textDecoration="none",document.getElementById("parrafoNivel").innerHTML="MEDIO: Tienes 75 litros de combustible y debes aterrizar a menos de 2.5 m/s.",reiniciarConfiguracion()}function seleccionarDificil(){fuelInicial=50,velocidadImpacto=1,document.getElementById("facilNivel").style.textDecoration="none",document.getElementById("medioNivel").style.textDecoration="none",document.getElementById("dificilNivel").style.textDecoration="underline",document.getElementById("parrafoNivel").innerHTML="DIFÍCIL: Tienes 50 litros de combustible y debes aterrizar a menos de 1 m/s.",reiniciarConfiguracion()}function seleccionarNave(){naveImg="nave",document.getElementById("naveOpcion").style.textDecoration="underline",document.getElementById("ovniOpcion").style.textDecoration="none"}function seleccionarOvni(){naveImg="ovni",document.getElementById("ovniOpcion").style.textDecoration="underline",document.getElementById("naveOpcion").style.textDecoration="none"}function seleccionarLuna(){document.getElementsByClassName("d")[0].style.backgroundImage="url('img/LUN001.png')",document.getElementsByClassName("d")[0].style.backgroundColor="#787878",document.getElementById("lunaOpcion").style.textDecoration="underline",document.getElementById("marteOpcion").style.textDecoration="none"}function seleccionarMarte(){document.getElementsByClassName("d")[0].style.backgroundImage="url('img/MARS001.png')",document.getElementsByClassName("d")[0].style.backgroundColor="#DB1616",document.getElementById("marteOpcion").style.textDecoration="underline",document.getElementById("lunaOpcion").style.textDecoration="none"}var fuelInicial=100,fuel=fuelInicial,velocidadImpacto=5,alturaInicio=17,y=alturaInicio,recorrido=60,puntoAterrizaje=alturaInicio+recorrido,v=0,g=1.622,a=g,dt=.016683,timer=null,timerFuel=null,hayFuel=!0,pausaVisible=!1,instruccionesVisibles=!1,opcionesVisibles=!1,aboutVisible=!1,finJuego=!1,hayPausa=!0,naveImg="nave";window.onload=function(){mensajeBienvenida(),document.getElementById("showm").onclick=function(){document.getElementsByClassName("c")[0].style.display="block",stop()},document.getElementById("hidem").onclick=function(){document.getElementsByClassName("c")[0].style.display="none",start()},document.ontouchstart=function(){motorOn()},document.ontouchend=function(){motorOff()},document.onkeydown=function(b){var c=b.keyCode;32==c&&motorOn()},document.onkeyup=function(b){var c=b.keyCode;32==c&&motorOff()},document.getElementById("bienvenidaJugar").onclick=function(){ocultar()},document.getElementById("play").onclick=function(){0==pausaVisible?mostrarPausa():ocultar()},document.onkeypress=function(b){var c=b.keyCode;112!=c&&80!=c||0!=pausaVisible?112!=c&&80!=c||1!=pausaVisible||ocultar():mostrarPausa()},document.getElementById("instruction").onclick=function(){0==instruccionesVisibles?mostrarInstrucciones():ocultar()},document.getElementById("option").onclick=function(){0==opcionesVisibles?mostrarOpciones():ocultar()},document.getElementById("about").onclick=function(){0==aboutVisible?mostrarAbout():ocultar()};var b,a=document.getElementsByClassName("volverMovil");for(b=0;b<a.length;b++)a[b].onclick=function(){ocultarTodo()};document.getElementById("restartMovil").onclick=function(){document.getElementsByClassName("c")[0].style.display="none",restart(),start(),motorOff()},document.getElementById("reiniciarPausa").onclick=function(){restart(),ocultar()},document.getElementById("continuarPausa").onclick=function(){ocultar()},document.getElementById("facilNivel").onclick=function(){seleccionarFacil()},document.getElementById("medioNivel").onclick=function(){seleccionarMedio()},document.getElementById("dificilNivel").onclick=function(){seleccionarDificil()},document.getElementById("naveOpcion").onclick=function(){seleccionarNave()},document.getElementById("ovniOpcion").onclick=function(){seleccionarOvni()},document.getElementById("lunaOpcion").onclick=function(){seleccionarLuna()},document.getElementById("marteOpcion").onclick=function(){seleccionarMarte()},document.getElementById("rejugar").onclick=function(){restart(),start(),motorOff()}};
